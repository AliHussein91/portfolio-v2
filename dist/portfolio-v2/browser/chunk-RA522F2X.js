import{a as P}from"./chunk-UPFBTAVO.js";import{i as S,j as d,k as O,l as y,n as x,o as E,p as w,q as R,r as q,s as N,t as I,u as k,v as T,x as F}from"./chunk-WDQRD4KS.js";import"./chunk-G7EGHA34.js";import{Ja as s,La as a,Ra as n,Sa as e,Ta as p,V as b,X as v,Xa as C,ab as i,cb as M,ib as h,ya as m}from"./chunk-EK42WQS7.js";function G(o,r){o&1&&(n(0,"div"),i(1," Username is required. "),e())}function A(o,r){o&1&&(n(0,"div"),i(1," Email is required. "),e())}function D(o,r){o&1&&(n(0,"div"),i(1," Password is required and must be at least 8 characters. "),e())}function L(o,r){o&1&&(n(0,"div"),i(1," Image URL is required. "),e())}function U(o,r){o&1&&(n(0,"div"),i(1," Role is required. "),e())}var V=class o{authService=b(P);fb=b(T);loading=!1;form;constructor(){this.form=this.fb.nonNullable.group({username:["",d.required],email:["",d.required],password:["",[d.required,d.minLength(8)]],image:["",d.required],role:["admin",d.required]})}onSubmit(){this.loading=!0;let r=this.form.getRawValue();this.authService.register(r).subscribe({next:l=>{localStorage.setItem("token",l.token),this.authService.adminLoggedIn.set(!0),this.authService.redirectToAdmin()},error:l=>{console.error(l)},complete:()=>{this.loading=!1}})}static \u0275fac=function(l){return new(l||o)};static \u0275cmp=v({type:o,selectors:[["app-register"]],standalone:!0,features:[h],decls:32,vars:8,consts:[[3,"ngSubmit","formGroup"],["for","username"],["id","username","formControlName","username","type","text","required",""],[4,"ngIf"],["for","email"],["id","email","formControlName","email","type","email","required",""],["for","password"],["id","password","formControlName","password","type","password","required","","minlength","8"],["for","image"],["id","image","formControlName","image","type","text","required",""],["for","role"],["id","role","formControlName","role","required",""],["value","admin"],["value","user"],["type","submit",3,"disabled"]],template:function(l,t){if(l&1&&(n(0,"form",0),C("ngSubmit",function(){return t.onSubmit()}),n(1,"div")(2,"label",1),i(3,"Username"),e(),p(4,"input",2),s(5,G,2,0,"div",3),e(),n(6,"div")(7,"label",4),i(8,"Email"),e(),p(9,"input",5),s(10,A,2,0,"div",3),e(),n(11,"div")(12,"label",6),i(13,"Password"),e(),p(14,"input",7),s(15,D,2,0,"div",3),e(),n(16,"div")(17,"label",8),i(18,"Image URL"),e(),p(19,"input",9),s(20,L,2,0,"div",3),e(),n(21,"div")(22,"label",10),i(23,"Role"),e(),n(24,"select",11)(25,"option",12),i(26,"Admin"),e(),n(27,"option",13),i(28,"User"),e()(),s(29,U,2,0,"div",3),e(),n(30,"button",14),i(31),e()()),l&2){let u,c,g,f,_;a("formGroup",t.form),m(5),a("ngIf",((u=t.form.get("username"))==null?null:u.invalid)&&((u=t.form.get("username"))==null?null:u.touched)),m(5),a("ngIf",((c=t.form.get("email"))==null?null:c.invalid)&&((c=t.form.get("email"))==null?null:c.touched)),m(5),a("ngIf",((g=t.form.get("password"))==null?null:g.invalid)&&((g=t.form.get("password"))==null?null:g.touched)),m(5),a("ngIf",((f=t.form.get("image"))==null?null:f.invalid)&&((f=t.form.get("image"))==null?null:f.touched)),m(9),a("ngIf",((_=t.form.get("role"))==null?null:_.invalid)&&((_=t.form.get("role"))==null?null:_.touched)),m(),a("disabled",t.form.invalid||t.loading),m(),M(" ",t.loading?"Registering...":"Register"," ")}},dependencies:[F,x,q,N,S,R,O,y,I,k,E,w],styles:["form[_ngcontent-%COMP%]{max-width:400px;margin:2rem auto;padding:2rem;background:#fff;border-radius:12px;box-shadow:0 2px 16px #00000014}form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{margin-bottom:1.5rem;display:flex;flex-direction:column}form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-weight:600;margin-bottom:.5rem;color:#333;letter-spacing:.02em}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:.7rem 1rem;border:1px solid #ccc;border-radius:6px;font-size:1rem;transition:border-color .2s;background:#f9f9f9}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{border-color:#007bff;outline:none;background:#fff}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:invalid.touched, form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:invalid.touched{border-color:#dc3545}form[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{cursor:pointer}form[_ngcontent-%COMP%]   div[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{color:#dc3545;font-size:.95rem;margin-top:.3rem;font-weight:500}form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{width:100%;padding:.9rem;background:#007bff;color:#fff;font-size:1.1rem;font-weight:600;border:none;border-radius:6px;cursor:pointer;transition:background .2s}form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:hover:not(:disabled){background:#0056b3}form[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:disabled{background:#b0c4de;cursor:not-allowed}"]})};export{V as RegisterComponent};
